
<div class="container">
	<h1>
		User's list:
	</h1>
	<a href="#/register">
		Go to registration page
	</a>
	<table class="table table-hover">
		<tr>
			<td class="col-md-2">
				<b>Login</b>
			</td>
			<td class="col-md-2">
				<b>Full name</b>
			</td>
			<td class="col-md-2">
				<b>E-mail address</b>
			</td>
			<td class="col-md-2">
				<b>Roles</b>
			</td>
			<td class="col-md-2">
			</td>
			<td class="col-md-2">
			</td>
			<td class="col-md-1">
			</td>

		</tr>
		
		<tr ng-repeat="user in Users track by $index" id="id-{{$index}}">

			<td ng-show="!user.editing" class="col-md-1">
		      	{{user.login}}
		     </td>
		   	<td ng-show="!user.editing" class="col-md-1">
		      	{{user.full}}
		    </td>
		    <td ng-show="!user.editing" class="col-md-1">
		    	{{user.mail}}
			</td>
			<td ng-show="!user.editing" class="col-md-2">
			 	{{user.role.join(', ')}}
		      	
			</td>
			<td ng-show="!user.editing" class="col-md-1">
				<button class="btn btn-success" ng-click="Edit($index)">
					Edit
				</button>
			</td>
			<td ng-show="!user.editing" class="col-md-1">
				<button class="btn btn-danger" ng-click="Delete($index)">
					Delete
				</button>
			</td>
			<td ng-show="!user.editing" class="col-md-1">
			</td>

			<!--USER EDITING BELOW-->

			<td ng-show="user.editing" class="col-md-1">
				<input placeholder="Login" class="form-control" ng-model="Users[$index].login" value="user.login">
			</td>
			
			<td ng-show="user.editing" class="col-md-1">
				<input placeholder="Full name" class="form-control" ng-model="Users[$index].full" value="user.full">
			</td>
			<td ng-show="user.editing" class="col-md-1">
				<input placeholder="Email" class="form-control" ng-model="Users[$index].mail" value="user.mail">
			</td>
			<td ng-show="user.editing" class="col-md-2">
				<ui-select id="role-{{$index}}" multiple tagging tagging-label="false" ng-model="Users[$index].role" theme="bootstrap" ng-disabled="disabled" class="col-md-12">
					<ui-select-match placeholder="Select roles...">
						{{$item}}
					</ui-select-match>
					<ui-select-choices repeat="role in roles | filter:$select.search">
								{{role}}
					</ui-select-choices>
				</ui-select>
			</td>
			<td ng-show="user.editing" class="col-md-1">
				<button ng-click="Save($index)" class="btn btn-success">
					Save
				</button>
			</td>
			<td ng-show="user.editing" class="col-md-1">
			</td>
			<td ng-show="user.editing" class="col-md-1">
			</td>
		</tr>
		<tr ng-show="registring">
			<td class="col-md-1">
				<input class="form-control col-md-12" ng-model="userCreation.login" placeholder="Login">
			</td>
			<td class="col-md-1">
				<input class="form-control"  ng-model="userCreation.full" placeholder="Full name">
			</td>
			<td class="col-md-1">      	    
				<input class="form-control"  ng-model="userCreation.mail" placeholder="E-mail">
			</td>
			<td class="col-md-2">
				<ui-select multiple tagging tagging-label="false" id="role_input" ng-model="userCreation.role" theme="bootstrap" ng-disabled="disabled">
					<ui-select-match placeholder="Select roles...">
						{{$item}}
					</ui-select-match>
					<ui-select-choices repeat="role in roles | filter:$select.search">
								{{role}}
					</ui-select-choices>
				</ui-select>   
			</td>
			<td class="col-md-1">
			    <input class="form-control col-md-12" type="password" ng-model="userCreation.password" placeholder="Password">
			</td>
			<td class="col-md-1">
				<input class="form-control col-md-12" type="password" ng-model="userCreation.passwordConfirm" placeholder="Password again">
			</td>
			<td class="col-md-1">
				<button type="button" ng-click="AddToArray()" class="btn btn-primary">
					Add
				</button>
			</td>
		</tr>
	</table>
			
	<div ng-show="isAdmin">
		<div class="row">
			<div class="col-md-offset-1">
				<button ng-show="!registring" ng-click="Add()" class="btn btn-primary btn-lg">	
					Add user
				</button>
			</div>
		</div>
	</div>
</div>